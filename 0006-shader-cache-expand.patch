diff --git a/src/util/disk_cache.c b/src/util/disk_cache.c
index 00000000000..11111111111 100644
--- a/src/util/disk_cache.c
+++ b/src/util/disk_cache.c
@@ -1,3 +1,4 @@
+#include <stdint.h>
 #include <stdlib.h>

 static uint64_t
@@ -80,7 +81,12 @@ disk_cache_get_max_size(void)
 {
     const char *env = getenv("MESA_SHADER_CACHE_MAX_SIZE");
-    return env ? strtoull(env, NULL, 10) : (uint64_t)1 << 30;
+
+    if (env && env[0] != '\0') {
+        return strtoull(env, NULL, 10);
+    }
+
+    return (uint64_t)2 << 30;
 }
